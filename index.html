<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Posts</title>
    <link rel="stylesheet" href="res\css\common.css">
    <link rel="stylesheet" href="res\css\index.css">

</head>
<body>
    <nav>
        <div class="nav-left">
            <a href="index.html" class="nav-link">Home</a>
            <a href="addPost.html" class="nav-link">Add Post</a>
        </div>
        <a href="login.html" class="user-icon-link">
            <img src="res\images\user-avatar.png" alt="User Profile">
        </a>
    </nav>

    <section id="posts">
        <h1>Recent Posts</h1>

        <!-- Postitus pildiga -->
        <div class="post">
            <div class="post-header">
                <img class="avatar" src="res\images\user-avatar.png" alt="User Avatar">
                <span class="post-info">Oct 22, 2024</span>
            </div>
            <div class="post-content">
                <img src="res\images\tartu.jpeg" alt="Tartu 2022">
                <p>Tartu 2022</p>
            </div>
            <div class="post-footer">
                <button class="like-button">üëç Like</button>
                <span class="like-count">12 Likes</span>
            </div>
        </div>
        
       
    </section>

    <footer>
        <p>2024</p>
    </footer>
     <script>
        // Fetch posts from local JSON file and add them to the posts section
        fetch('json/posts.json')
            .then(response => response.json())
            .then(posts => {
                const postsSection = document.getElementById('posts');

                posts.forEach(post => {
                    // Create the container div for each post
                    const postDiv = document.createElement('div');
                    postDiv.className = 'post';

                    // Create post header with avatar and date
                    const postHeader = document.createElement('div');
                    postHeader.className = 'post-header';
                    const avatar = document.createElement('img');
                    avatar.className = 'avatar';
                    avatar.src = 'res/images/user-avatar.png';
                    avatar.alt = 'User Avatar';
                    const postInfo = document.createElement('span');
                    postInfo.className = 'post-info';
                    postInfo.textContent = new Date(post.createdAt).toLocaleDateString();

                    // Append avatar and date to header
                    postHeader.appendChild(avatar);
                    postHeader.appendChild(postInfo);

                    // Create post content with title and content
                    const postContent = document.createElement('div');
                    postContent.className = 'post-content';
                    const title = document.createElement('h3');
                    title.textContent = post.title;
                    const content = document.createElement('p');
                    content.textContent = post.content;

                    // Check if there is a Base64 image in the post data
                    if (post.imageBase64) {
                        const img = document.createElement('img');
                        img.src = post.imageBase64; // Use Base64 string as src
                        img.alt = post.title;
                        img.className = 'post-image';
                        postContent.appendChild(img); // Append image to the post content
                    }

                    // Append title and content to post content div
                    postContent.appendChild(title);
                   // postContent.appendChild(img);
                    postContent.appendChild(content);
                    //postContent.appendChild(img);

                    // Create post footer with like button
                    const postFooter = document.createElement('div');
                    postFooter.className = 'post-footer';
                    const likeButton = document.createElement('button');
                    likeButton.className = 'like-button';
                    likeButton.textContent = 'üëç Like';
                    const likeCount = document.createElement('span');
                    likeCount.className = 'like-count';
                    likeCount.textContent = `${post.likes || 0} Likes`;

                    

                    // Append like button and like count to footer
                    postFooter.appendChild(likeButton);
                    postFooter.appendChild(likeCount);

                    // Append header, content, and footer and image to main post div
                    //postDiv.appendChild(img);
                    postDiv.appendChild(postHeader);
                    postDiv.appendChild(postContent);
                    postDiv.appendChild(postFooter);
                    //postDiv.appendChild(img);

                    // Append post div to posts section
                    postsSection.appendChild(postDiv);
                });
            })
            .catch(error => console.error('Error fetching posts:', error));
    </script> 
</body>
</html>
